<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Módulo de Artículos</title>
  <link rel="stylesheet" href="articulos.component.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <header>
    <h1>Módulo de Artículos</h1>
  </header>
  <main>
    <section class="articulos">
      <h2>Agregar Artículo</h2>
      <form id="articulo-form">
        <input type="text" id="codigo" placeholder="Código" required>
        <input type="text" id="descripcion" placeholder="Descripción" required>
        <input type="text" id="idFamilia" placeholder="Id Familia" required>
        <input type="text" id="idUM" placeholder="Id UM" required>
        <input type="number" id="ultimoCosto" placeholder="Último Costo" required>
        <input type="number" id="precioVenta" placeholder="Precio Venta" required>
        <input type="number" id="iva" placeholder="IVA (%)" required>
        <input type="number" id="ieps" placeholder="IEPS (%)" required>
        <input type="text" id="idUsuario" placeholder="Id Usuario" required>
        <input type="date" id="fechaCreacion" required>
        <select id="estado" required>
          <option value="activo">Activo</option>
          <option value="inactivo">Inactivo</option>
        </select>
        
      </form>

      <h2>Lista de Artículos</h2>
      <table id="articulos-table">
        <thead>
          <tr>
            <th>Id</th>
            <th>Código</th>
            <th>Descripción</th>
            <th>Id Familia</th>
            <th>Id UM</th>
            <th>Último Costo</th>
            <th>Precio Venta</th>
            <th>IVA</th>
            <th>IEPS</th>
            <th>Id Usuario</th>
            <th>Fecha de Creación</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="articulos-body"></tbody>
      </table>
    </section>
  </main>

  <script>
    let articuloId = 1;

    document.getElementById('articulo-form').addEventListener('submit', function (event) {
      event.preventDefault(); // Prevent default form submission

      // *Gather form data:*
      const formData = new FormData(this); // More efficient way to get form data
      const articleData = {};
      formData.forEach((value, key) => {
        articleData[key] = value;
      });

      // *Validate data (optional):*
      // Add checks for required fields and data types here

      // *Create and add new row:*
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
          <td>${++articuloId}</td>
          ${Object.entries(articleData).map(([key, value]) => <td>${value}</td>).join('')}
          <td>
              <button class="btn-editar">Editar</button>
              <button class="btn-eliminar">Eliminar</button>
          </td>
      `;

      document.getElementById('articulos-body').appendChild(newRow);

      // Reset the form
      this.reset();
    });

    function eliminarArticulo(btn) {
      if (confirm("¿Estás seguro de que deseas eliminar este artículo?")) {
        const row = btn.closest('tr');
        row.parentNode.removeChild(row);
      }
    }

    function editarArticulo(btn) {
      if (confirm("¿Estás seguro de que deseas editar este artículo?")) {
        const row = btn.closest('tr');
        row.parentNode.removeChild(row);
    
    }
  }
    </script>
</body>
</html>